#include <libmrubyc.h>

/* 
 */
#include <stdint.h>
extern const uint8_t code[];
const uint8_t
#if defined __GNUC__
__attribute__((aligned(4)))
#elif defined _MSC_VER
__declspec(align(4))
#endif
code[] = {
0x52,0x49,0x54,0x45,0x30,0x30,0x30,0x34,0x8f,0x60,0x00,0x00,0x00,0xea,0x4d,0x41,
0x54,0x5a,0x30,0x30,0x30,0x30,0x49,0x52,0x45,0x50,0x00,0x00,0x00,0xb9,0x30,0x30,
0x30,0x30,0x00,0x00,0x00,0xb1,0x00,0x02,0x00,0x07,0x00,0x00,0x00,0x00,0x00,0x18,
0x00,0xbf,0xff,0x83,0x00,0x40,0x09,0x17,0x01,0x00,0x00,0x06,0x01,0x80,0x00,0x3d,
0x01,0x00,0x00,0xa0,0x01,0x00,0x00,0x06,0x01,0xbf,0xff,0x83,0x02,0x3f,0xff,0x83,
0x02,0x80,0x40,0x01,0x01,0x00,0x41,0xa0,0x01,0x00,0x00,0x06,0x01,0xc0,0x00,0x03,
0x01,0x00,0x80,0xa0,0x01,0x00,0x40,0x01,0x01,0x00,0xc5,0x2d,0x00,0x80,0x80,0x01,
0x01,0xc0,0x1d,0x83,0x01,0x01,0x00,0xb5,0x01,0x40,0x00,0x99,0x00,0xbf,0xff,0x83,
0x01,0x00,0x00,0x07,0x01,0x3f,0xf6,0x18,0x01,0x00,0x00,0x05,0x00,0x00,0x00,0x4a,
0x00,0x00,0x00,0x01,0x00,0x00,0x0f,0x6d,0x72,0x75,0x62,0x79,0x2f,0x63,0x20,0x65,
0x78,0x61,0x6d,0x70,0x6c,0x65,0x00,0x00,0x00,0x05,0x00,0x04,0x70,0x75,0x74,0x73,
0x00,0x00,0x0b,0x63,0x6f,0x6e,0x74,0x72,0x6f,0x6c,0x5f,0x6c,0x65,0x64,0x00,0x00,
0x05,0x73,0x6c,0x65,0x65,0x70,0x00,0x00,0x01,0x2b,0x00,0x00,0x01,0x3e,0x00,0x4c,
0x56,0x41,0x52,0x00,0x00,0x00,0x13,0x00,0x00,0x00,0x01,0x00,0x01,0x62,0x00,0x00,
0x00,0x01,0x45,0x4e,0x44,0x00,0x00,0x00,0x00,0x08,
};

#define MEMSIZE (1024*30)
static uint8_t mempool[MEMSIZE];


void setup() {
  delay(1000);

  SerialUSB.println("--- begin setup"); 
  mrbc_init(mempool, MEMSIZE);
  mrbc_define_wiolte_methods();
  if(NULL == mrbc_create_task( code, 0 )){
    SerialUSB.println("mrbc_create_task error");
    return;
  }
  SerialUSB.println("--- run mruby script"); 
  mrbc_run();
}

void loop() {
  delay(1000);
}
